<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

    <mapper namespace="DepartmentMapper">

    <resultMap type="Department" id="DepartmentMap">
        <id column="DEPT_ID" property="deptId"/>
        <result column="DEPT_CODE" property="deptCode"/>
        <result column="DEPT_NAME" property="deptName"/>
        <result column="SUP_ID" property="supId"/>
        <result column="FUNC" property="function"/>
        <result column="REMARK" property="address"/>
        <result column="ADDRESS" property="remark"/>
    </resultMap>

    <!-- 表名 -->
    <sql id="tableName">
        T_DEPARTMENT
    </sql>

    <!-- 字段 -->
    <sql id="field">
        DEPT_ID, DEPT_CODE, DEPT_NAME, SUP_ID, FUNC, REMARK, ADDRESS
    </sql>

    <!-- 字段值 -->
    <sql id="fieldValue">
        #{deptId}, #{deptCode}, #{deptName}, #{supId}, #{function}, #{address}, #{remark}
    </sql>

    <!-- 获取列表 -->
    <select id="selectDepartment" parameterType="pd" resultMap="DepartmentMap">
        select DEPT_ID, DEPT_CODE, DEPT_NAME, SUP_ID, FUNC, REMARK, ADDRESS
        from T_DEPARTMENT
        WHERE 1=1
    </select>

    <!-- 添加部门信息 -->
    <insert id="saveRelativity" parameterType="Department">
        insert into T_DEPARTMENT(DEPT_CODE, DEPT_NAME,SUP_ID,FUNC,REMARK,ADDRESS)
        values(#{deptCode}, #{deptName},#{supId},#{function},#{address},#{remark})
    </insert>

    <!-- 获取部门总数 -->
    <select id="getDepartmentCount" parameterType="String" resultType="pd">
        SELECT
            count(1) DEPT_CODE
        FROM
            <include refid="tableName"></include>
    </select>

</mapper>
